% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/PSor_fit.r
\name{PSor.fit}
\alias{PSor.fit}
\title{Fit Principal Stratification Models with an Odds Ratio Assumption}
\usage{
PSor.fit(
  out.formula,
  ps.formula,
  pro.formula,
  df,
  out.name,
  int.name,
  trt.name,
  cov.names,
  or,
  SLmethods = c("SL.glm", "SL.rpart", "SL.nnet"),
  n.fold,
  scale = "RD",
  alpha
)
}
\arguments{
\item{out.formula}{A formula for the outcome model, e.g., \code{Y ~ X1 + X2}.}

\item{ps.formula}{A formula for the principal score model (for the intermediate variable D), e.g., \code{D ~ X1 + X2}.}

\item{pro.formula}{A formula for the propensity score model (for the treatment Z), e.g., \code{Z ~ X1 + X2}.}

\item{df}{The data frame containing the variables.}

\item{out.name}{A character string specifying the name of the outcome variable (Y).}

\item{int.name}{A character string specifying the name of the intermediate variable (D).}

\item{trt.name}{A character string specifying the name of the treatment variable (Z).}

\item{cov.names}{A character vector of covariate names.}

\item{or}{The odds ratio assumption. Can be a single numeric value, a vector of values corresponding to each observation, or \code{Inf} for the monotonicity assumption.}

\item{SLmethods}{A character vector of learning algorithms to be used by \code{SuperLearner} for the DML estimates. Defaults to \code{c("SL.glm", "SL.rpart", "SL.nnet")}.}

\item{n.fold}{The number of folds for cross-fitting in the DML procedure.}

\item{scale}{The scale for the causal estimand. Can be "RD" (Risk Difference), "RR" (Risk Ratio), or "OR" (Odds Ratio). Defaults to "RD".}

\item{alpha}{The significance level for constructing confidence intervals. Defaults to 0.05.}
}
\value{
A data frame containing the point estimates, standard errors, and confidence intervals for the causal effects within each principal stratum ("Always-Takers", "Compliers", "Never-Takers", and "Defiers" if applicable). Both CDR and DML results are provided.
}
\description{
\code{PSor.fit} is the main function of the package. It estimates the causal effects
within principal strata, defined by joint potential values of an intermediate
variable, under an assumption about the odds ratio of the principal scores.
The function returns both parametric Conditionally Doubly Robust (CDR) estimates
and Debiased Machine Learning (DML) estimates.
}
\examples{
\dontrun{
# This is a conceptual example, as the function requires specific data.
# Assume 'my_data' is a data frame with variables Y, D, Z, X1, X2.

results <- PSor.fit(
  out.formula = Y ~ X1 + X2,
  ps.formula = D ~ X1 + X2,
  pro.formula = Z ~ X1 + X2,
  df = my_data,
  out.name = "Y",
  int.name = "D",
  trt.name = "Z",
  cov.names = c("X1", "X2"),
  or = Inf, # Monotonicity assumption
  n.fold = 5,
  scale = "RD"
)

print(results)
}
}
